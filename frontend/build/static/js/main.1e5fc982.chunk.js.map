{"version":3,"sources":["types/profile.ts","types/article.ts","types/comment.ts","types/error.ts","types/object.ts","components/App/App.slice.ts","components/Pages/Home/Home.slice.ts","components/Pages/Login/Login.slice.ts","components/Pages/Settings/Settings.slice.ts","components/Pages/Register/Register.slice.ts","components/ArticleEditor/ArticleEditor.slice.tsx","components/ArticlesViewer/ArticlesViewer.slice.ts","components/Pages/ProfilePage/ProfilePage.slice.ts","components/Pages/ArticlePage/ArticlePage.slice.ts","state/store.ts","types/user.ts","services/conduit.ts","state/storeHooks.ts","types/genericFormField.tsx","config/settings.ts","components/ContainerPage/ContainerPage.tsx","components/FormGroup/FormGroup.tsx","components/Errors/Errors.tsx","components/GenericForm/GenericForm.tsx","components/ArticleEditor/ArticleEditor.tsx","components/Pages/EditArticle/EditArticle.tsx","components/Footer/Footer.tsx","components/Header/Header.tsx","types/style.ts","components/ArticlePreview/ArticlePreview.tsx","components/Pagination/Pagination.tsx","components/ArticlesViewer/ArticlesViewer.tsx","components/Pages/Home/Home.tsx","components/Pages/Login/Login.tsx","components/Pages/NewArticle/NewArticle.tsx","components/Pages/Register/Register.tsx","components/Pages/Settings/Settings.tsx","types/location.ts","components/UserInfo/UserInfo.tsx","components/Pages/ProfilePage/ProfilePage.tsx","components/Pages/ArticlePage/ArticlePage.tsx","components/App/App.tsx","index.tsx"],"names":["profileDecoder","object","username","string","bio","nullable","image","following","either","boolean","hardcoded","articleDecoder","slug","title","description","body","tagList","array","createdAt","iso8601","updatedAt","favorited","favoritesCount","number","author","multipleArticlesDecoder","articles","articlesCount","commentDecoder","id","genericErrorsDecoder","dict","objectToQueryString","Object","entries","map","key","value","join","initialState","user","None","loading","slice","createSlice","name","reducers","initializeApp","loadUser","state","payload","Some","logout","endLoad","actions","tags","selectedTab","startLoadingTags","loadTags","changeTab","tab","email","password","errors","loginIn","initializeLogin","updateField","updateErrors","startLoginIn","updating","initializeSettings","startUpdate","extraReducers","type","R","signingUp","initializeRegister","startSigningUp","article","tag","submitting","initializeEditor","startSubmitting","addTag","length","push","removeTag","index","loadArticle","currentPage","startLoadingArticles","loadArticles","isSubmitting","startSubmittingFavorite","endSubmittingFavorite","changePage","page","profile","initializeProfile","loadProfile","commentSection","comments","commentBody","submittingComment","metaSection","submittingFavorite","submittingFollow","deletingArticle","initializeArticlePage","loadComments","updateAuthor","startSubmittingFollow","updateCommentBody","startSubmittingComment","startDeletingArticle","middlewareConfiguration","serializableCheck","store","configureStore","reducer","app","home","login","settings","register","editor","articleViewer","articlePage","devTools","middleware","getDefaultMiddleware","dispatchOnCall","action","dispatch","userDecoder","token","loadUserIntoApp","localStorage","setItem","axios","defaults","headers","Authorization","getArticles","filters","finalFilters","limit","offset","guard","get","data","getTags","post","Ok","response","Err","getUser","favoriteArticle","unfavoriteArticle","delete","updateSettings","put","signUp","createArticle","getArticle","updateArticle","getProfile","followUser","unfollowUser","getFeed","getArticleComments","deleteComment","commentId","createComment","comment","deleteArticle","useStoreWithInitializer","getter","initializer","useState","getState","setState","useEffect","unsubscribe","subscribe","useStore","buildGenericFormField","placeholder","fieldType","lg","baseURL","ContainerPage","children","className","FormGroup","disabled","onChange","TextAreaFormGroup","rows","ListFormGroup","listValue","onEnter","onRemoveItem","onKeyDown","ev","preventDefault","onKeyUp","onListFieldKeyUp","onClick","Errors","field","fieldError","GenericForm","fields","formObject","submitButtonText","onSubmit","onAddItemToList","onRemoveListItem","onUpdateField","listName","target","ArticleEditor","onAddTag","onRemoveTag","_","EditArticle","useParams","_loadArticle","unwrap","location","hash","match","err","ok","Footer","href","Header","NavItem","text","none","GuestLinks","some","UserLinks","icon","exact","to","activeClassName","classObjectToClassName","obj","filter","ArticlePreview","onFavoriteToggle","src","undefined","format","TagList","Pagination","count","itemsPerPage","onPageChange","Math","ceil","range","ArticlesViewer","toggleClassName","tabs","onTabChange","ArticlesTabSet","ArticleList","Tab","active","isNone","Home","load","buildTabsNames","HomeSidebar","isSome","getFeedOrGlobalArticles","multipleArticles","tagsResult","Array","from","Set","startsWith","Login","signIn","e","NewArticle","Register","onSignUp","Settings","onUpdateSettings","_logout","removeItem","redirect","path","UserInfo","onFollowToggle","onEditSettings","sessionUsername","x","unwrapOr","EditProfileButton","ToggleFollowButton","ProfilePage","favorites","useLocation","pathname","endsWith","onLoad","getArticlesByType","newProfile","ArticlePage","ArticlePageBanner","ArticleMeta","CommentSection","props","ArticleAuthorInfo","OwnerArticleMetaActions","NonOwnerArticleMetaActions","btn","onFollow","onFavorite","onDeleteArticle","style","display","CommentForm","ArticleComment","onPostComment","onCommentChange","onDeleteComment","App","userIsLogged","GuestOnlyRoute","UserOnlyRoute","getItem","rest","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.1e5fc982.chunk.js","sourcesContent":["import { Decoder, string, nullable, boolean, object, hardcoded, either } from 'decoders';\nimport { PublicUser } from './user';\n\nexport interface Profile extends PublicUser {\n  following: boolean;\n}\n\nexport const profileDecoder: Decoder<Profile> = object({\n  username: string,\n  bio: nullable(string),\n  image: nullable(string),\n  following: either(boolean, hardcoded(false)),\n});\n","import { array, boolean, Decoder, iso8601, number, object, string } from 'decoders';\nimport { Profile, profileDecoder } from './profile';\n\nexport interface Article {\n  slug: string;\n  title: string;\n  description: string;\n  body: string;\n  tagList: string[];\n  createdAt: Date;\n  updatedAt: Date;\n  favorited: boolean;\n  favoritesCount: number;\n  author: Profile;\n}\n\nexport const articleDecoder: Decoder<Article> = object({\n  slug: string,\n  title: string,\n  description: string,\n  body: string,\n  tagList: array(string),\n  createdAt: iso8601,\n  updatedAt: iso8601,\n  favorited: boolean,\n  favoritesCount: number,\n  author: profileDecoder,\n});\n\nexport interface MultipleArticles {\n  articles: Article[];\n  articlesCount: number;\n}\n\nexport const multipleArticlesDecoder: Decoder<MultipleArticles> = object({\n  articles: array(articleDecoder),\n  articlesCount: number,\n});\n\nexport interface ArticleForEditor {\n  title: string;\n  description: string;\n  body: string;\n  tagList: string[];\n}\n\nexport interface ArticlesFilters {\n  tag?: string;\n  author?: string;\n  favorited?: string;\n  limit?: number;\n  offset?: number;\n}\n\nexport interface FeedFilters {\n  limit?: number;\n  offset?: number;\n}\n","import { Decoder, iso8601, number, object, string } from 'decoders';\nimport { Profile, profileDecoder } from './profile';\n\nexport interface Comment {\n  id: number;\n  createdAt: Date;\n  updatedAt: Date;\n  body: string;\n  author: Profile;\n}\n\nexport const commentDecoder: Decoder<Comment> = object({\n  id: number,\n  createdAt: iso8601,\n  updatedAt: iso8601,\n  body: string,\n  author: profileDecoder,\n});\n","import { array, dict, string } from 'decoders';\n\nexport type GenericErrors = Record<string, string[]>;\n\nexport const genericErrorsDecoder = dict(array(string));\n","export function objectToQueryString<T, V>(object: Partial<Record<keyof T, V>>): string {\n  return Object.entries(object)\n    .map(([key, value]) => `${key}=${value}`)\n    .join('&');\n}\n","import { None, Option, Some } from '@hqoss/monads';\nimport { createSlice, PayloadAction } from '@reduxjs/toolkit';\nimport { User } from '../../types/user';\n\nexport interface AppState {\n  user: Option<User>;\n  loading: boolean;\n}\n\nconst initialState: AppState = {\n  user: None,\n  loading: true,\n};\n\nconst slice = createSlice({\n  name: 'app',\n  initialState,\n  reducers: {\n    initializeApp: () => initialState,\n    loadUser: (state, { payload: user }: PayloadAction<User>) => {\n      state.user = Some(user);\n      state.loading = false;\n    },\n    logout: (state) => {\n      state.user = None;\n    },\n    endLoad: (state) => {\n      state.loading = false;\n    },\n  },\n});\n\nexport const { loadUser, logout, endLoad, initializeApp } = slice.actions;\n\nexport default slice.reducer;\n","import { None, Option, Some } from '@hqoss/monads';\nimport { createSlice, PayloadAction } from '@reduxjs/toolkit';\n\nexport interface HomeState {\n  tags: Option<string[]>;\n  selectedTab: string;\n}\n\nconst initialState: HomeState = {\n  tags: None,\n  selectedTab: 'Global Feed',\n};\n\nconst slice = createSlice({\n  name: 'home',\n  initialState,\n  reducers: {\n    startLoadingTags: () => initialState,\n    loadTags: (state, { payload: tags }: PayloadAction<string[]>) => {\n      state.tags = Some(tags);\n    },\n    changeTab: (state, { payload: tab }: PayloadAction<string>) => {\n      state.selectedTab = tab;\n    },\n  },\n});\n\nexport const { startLoadingTags, loadTags, changeTab } = slice.actions;\n\nexport default slice.reducer;\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\nimport { GenericErrors } from '../../../types/error';\n\nexport interface LoginState {\n  user: {\n    email: string;\n    password: string;\n  };\n  errors: GenericErrors;\n  loginIn: boolean;\n}\n\nconst initialState: LoginState = {\n  user: {\n    email: '',\n    password: '',\n  },\n  errors: {},\n  loginIn: false,\n};\n\nconst slice = createSlice({\n  name: 'login',\n  initialState,\n  reducers: {\n    initializeLogin: () => initialState,\n    updateField: (\n      state,\n      { payload: { name, value } }: PayloadAction<{ name: keyof LoginState['user']; value: string }>\n    ) => {\n      state.user[name] = value;\n    },\n    updateErrors: (state, { payload: errors }: PayloadAction<GenericErrors>) => {\n      state.errors = errors;\n      state.loginIn = false;\n    },\n    startLoginIn: (state) => {\n      state.loginIn = true;\n    },\n  },\n});\n\nexport const { initializeLogin, updateField, updateErrors, startLoginIn } = slice.actions;\n\nexport default slice.reducer;\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\nimport { User, UserSettings } from '../../../types/user';\nimport { loadUser, logout } from '../../App/App.slice';\nimport * as R from 'ramda';\nimport { GenericErrors } from '../../../types/error';\n\nexport interface SettingsState {\n  user: UserSettings;\n  errors: GenericErrors;\n  updating: boolean;\n}\n\nconst initialState: SettingsState = {\n  user: { username: '', email: '', password: null, bio: null, image: null },\n  errors: {},\n  updating: false,\n};\n\nconst slice = createSlice({\n  name: 'settings',\n  initialState,\n  reducers: {\n    initializeSettings: () => initialState,\n    updateField: (state, { payload: { name, value } }: PayloadAction<{ name: keyof UserSettings; value: string }>) => {\n      state.user[name] = value;\n    },\n    updateErrors: (state, { payload: errors }: PayloadAction<GenericErrors>) => {\n      state.errors = errors;\n      state.updating = false;\n    },\n    startUpdate: (state) => {\n      state.updating = true;\n    },\n  },\n  extraReducers: {\n    [loadUser.type]: (state, { payload: user }: PayloadAction<User>) => {\n      state.user = { ...R.dissoc('token')(user), password: null };\n      state.updating = false;\n    },\n    [logout.type]: () => initialState,\n  },\n});\n\nexport const { initializeSettings, updateField, updateErrors, startUpdate } = slice.actions;\n\nexport default slice.reducer;\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\nimport { GenericErrors } from '../../../types/error';\nimport { UserForRegistration } from '../../../types/user';\n\nexport interface RegisterState {\n  user: UserForRegistration;\n  errors: GenericErrors;\n  signingUp: boolean;\n}\n\nconst initialState: RegisterState = {\n  user: {\n    username: '',\n    email: '',\n    password: '',\n  },\n  errors: {},\n  signingUp: false,\n};\n\nconst slice = createSlice({\n  name: 'register',\n  initialState,\n  reducers: {\n    initializeRegister: () => initialState,\n    updateField: (\n      state,\n      { payload: { name, value } }: PayloadAction<{ name: keyof RegisterState['user']; value: string }>\n    ) => {\n      state.user[name] = value;\n    },\n    updateErrors: (state, { payload: errors }: PayloadAction<GenericErrors>) => {\n      state.errors = errors;\n      state.signingUp = false;\n    },\n    startSigningUp: (state) => {\n      state.signingUp = true;\n    },\n  },\n});\n\nexport const { initializeRegister, updateField, updateErrors, startSigningUp } = slice.actions;\n\nexport default slice.reducer;\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\nimport { ArticleForEditor } from '../../types/article';\nimport * as R from 'ramda';\nimport { GenericErrors } from '../../types/error';\n\nexport interface EditorState {\n  article: ArticleForEditor;\n  tag: string;\n  submitting: boolean;\n  errors: GenericErrors;\n  loading: boolean;\n}\n\nconst initialState: EditorState = {\n  article: { title: '', body: '', tagList: [], description: '' },\n  tag: '',\n  submitting: false,\n  errors: {},\n  loading: true,\n};\n\nconst slice = createSlice({\n  name: 'editor',\n  initialState,\n  reducers: {\n    initializeEditor: () => initialState,\n    updateField: (\n      state,\n      { payload: { name, value } }: PayloadAction<{ name: keyof EditorState['article'] | 'tag'; value: string }>\n    ) => {\n      if (name === 'tag') {\n        state.tag = value;\n        return;\n      }\n\n      if (name !== 'tagList') {\n        state.article[name] = value;\n      }\n    },\n    updateErrors: (state, { payload: errors }: PayloadAction<GenericErrors>) => {\n      state.errors = errors;\n      state.submitting = false;\n    },\n    startSubmitting: (state) => {\n      state.submitting = true;\n    },\n    addTag: (state) => {\n      if (state.tag.length > 0) {\n        state.article.tagList.push(state.tag);\n        state.tag = '';\n      }\n    },\n    removeTag: (state, { payload: index }: PayloadAction<number>) => {\n      state.article.tagList = R.remove(index, 1, state.article.tagList);\n    },\n    loadArticle: (state, { payload: article }: PayloadAction<ArticleForEditor>) => {\n      state.article = article;\n      state.loading = false;\n    },\n  },\n});\n\nexport const { initializeEditor, updateField, startSubmitting, addTag, removeTag, updateErrors, loadArticle } =\n  slice.actions;\n\nexport default slice.reducer;\n","import { None, Option, Some } from '@hqoss/monads';\nimport { createSlice, PayloadAction } from '@reduxjs/toolkit';\nimport { Article, MultipleArticles } from '../../types/article';\nimport * as R from 'ramda';\n\nexport interface ArticleViewerArticle {\n  article: Article;\n  isSubmitting: boolean;\n}\n\nexport interface ArticleViewerState {\n  articles: Option<readonly ArticleViewerArticle[]>;\n  currentPage: number;\n  articlesCount: number;\n}\n\nconst initialState: ArticleViewerState = {\n  articles: None,\n  currentPage: 1,\n  articlesCount: 0,\n};\n\nconst slice = createSlice({\n  name: 'articleViewer',\n  initialState,\n  reducers: {\n    startLoadingArticles: () => initialState,\n    loadArticles: (state, { payload: { articles, articlesCount } }: PayloadAction<MultipleArticles>) => {\n      state.articles = Some(articles.map((article) => ({ article, isSubmitting: false })));\n      state.articlesCount = articlesCount;\n    },\n    startSubmittingFavorite: (state, { payload: index }: PayloadAction<number>) => {\n      state.articles = state.articles.map(R.adjust(index, R.assoc('isSubmitting', true)));\n    },\n    endSubmittingFavorite: (\n      state,\n      { payload: { article, index } }: PayloadAction<{ index: number; article: Article }>\n    ) => {\n      state.articles = state.articles.map(R.update<ArticleViewerArticle>(index, { article, isSubmitting: false }));\n    },\n    changePage: (state, { payload: page }: PayloadAction<number>) => {\n      state.currentPage = page;\n      state.articles = None;\n    },\n  },\n});\n\nexport const { startLoadingArticles, loadArticles, startSubmittingFavorite, endSubmittingFavorite, changePage } =\n  slice.actions;\n\nexport default slice.reducer;\n","import { None, Option, Some } from '@hqoss/monads';\nimport { createSlice, PayloadAction } from '@reduxjs/toolkit';\nimport { Profile } from '../../../types/profile';\n\nexport interface ProfilePageState {\n  profile: Option<Profile>;\n  submitting: boolean;\n}\n\nconst initialState: ProfilePageState = {\n  profile: None,\n  submitting: false,\n};\n\nconst slice = createSlice({\n  name: 'profile',\n  initialState,\n  reducers: {\n    initializeProfile: () => initialState,\n    loadProfile: (state, { payload: profile }: PayloadAction<Profile>) => {\n      state.profile = Some(profile);\n      state.submitting = false;\n    },\n    startSubmitting: (state) => ({ ...state, submitting: true }),\n  },\n});\n\nexport const { initializeProfile, loadProfile, startSubmitting } = slice.actions;\n\nexport default slice.reducer;\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\nimport { None, Option, Some } from '@hqoss/monads';\nimport { Article } from '../../../types/article';\nimport { Comment } from '../../../types/comment';\nimport { Profile } from '../../../types/profile';\n\nexport interface CommentSectionState {\n  comments: Option<Comment[]>;\n  commentBody: string;\n  submittingComment: boolean;\n}\n\nexport interface MetaSectionState {\n  submittingFavorite: boolean;\n  submittingFollow: boolean;\n  deletingArticle: boolean;\n}\n\nexport interface ArticlePageState {\n  article: Option<Article>;\n  commentSection: CommentSectionState;\n  metaSection: MetaSectionState;\n}\n\nconst initialState: ArticlePageState = {\n  article: None,\n  commentSection: {\n    comments: None,\n    commentBody: '',\n    submittingComment: false,\n  },\n  metaSection: {\n    submittingFavorite: false,\n    submittingFollow: false,\n    deletingArticle: false,\n  },\n};\n\nconst slice = createSlice({\n  name: 'settings',\n  initialState,\n  reducers: {\n    initializeArticlePage: () => initialState,\n    loadArticle: (state, { payload: article }: PayloadAction<Article>) => {\n      state.article = Some(article);\n      state.metaSection.submittingFavorite = false;\n    },\n    loadComments: (state, { payload: comments }: PayloadAction<Comment[]>) => {\n      state.commentSection.comments = Some(comments);\n      state.commentSection.commentBody = '';\n      state.commentSection.submittingComment = false;\n    },\n    updateAuthor: (state, { payload: author }: PayloadAction<Profile>) => {\n      state.article = state.article.map((article) => ({ ...article, author }));\n      state.metaSection.submittingFollow = false;\n    },\n    startSubmittingFavorite: (state) => {\n      state.metaSection.submittingFavorite = true;\n    },\n    startSubmittingFollow: (state) => {\n      state.metaSection.submittingFollow = true;\n    },\n    updateCommentBody: (state, { payload: commentBody }: PayloadAction<string>) => {\n      state.commentSection.commentBody = commentBody;\n    },\n    startSubmittingComment: (state) => {\n      state.commentSection.submittingComment = true;\n    },\n    startDeletingArticle: (state) => {\n      state.metaSection.deletingArticle = true;\n    },\n  },\n});\n\nexport const {\n  initializeArticlePage,\n  loadArticle,\n  loadComments,\n  updateAuthor,\n  startSubmittingFavorite,\n  startSubmittingFollow,\n  updateCommentBody,\n  startSubmittingComment,\n  startDeletingArticle,\n} = slice.actions;\n\nexport default slice.reducer;\n","import { Action, configureStore } from '@reduxjs/toolkit';\nimport app from '../components/App/App.slice';\nimport home from '../components/Pages/Home/Home.slice';\nimport login from '../components/Pages/Login/Login.slice';\nimport settings from '../components/Pages/Settings/Settings.slice';\nimport register from '../components/Pages/Register/Register.slice';\nimport editor from '../components/ArticleEditor/ArticleEditor.slice';\nimport articleViewer from '../components/ArticlesViewer/ArticlesViewer.slice';\nimport profile from '../components/Pages/ProfilePage/ProfilePage.slice';\nimport articlePage from '../components/Pages/ArticlePage/ArticlePage.slice';\n\nconst middlewareConfiguration = { serializableCheck: false };\n\nexport const store = configureStore({\n  reducer: { app, home, login, settings, register, editor, articleViewer, profile, articlePage },\n  devTools: {\n    name: 'Conduit',\n  },\n  middleware: (getDefaultMiddleware) => getDefaultMiddleware(middlewareConfiguration),\n});\nexport type State = ReturnType<typeof store.getState>;\n\nexport function dispatchOnCall(action: Action) {\n  return () => store.dispatch(action);\n}\n","import axios from 'axios';\nimport { Decoder, nullable, object, string } from 'decoders';\nimport { loadUser } from '../components/App/App.slice';\nimport { store } from '../state/store';\n\nexport interface PublicUser {\n  username: string;\n  bio: string | null;\n  image: string | null;\n}\n\nexport interface User extends PublicUser {\n  email: string;\n  token: string;\n}\n\nexport const userDecoder: Decoder<User> = object({\n  email: string,\n  token: string,\n  username: string,\n  bio: nullable(string),\n  image: nullable(string),\n});\n\nexport interface UserSettings extends PublicUser {\n  email: string;\n  password: string | null;\n}\n\nexport interface UserForRegistration {\n  username: string;\n  email: string;\n  password: string;\n}\n\nexport function loadUserIntoApp(user: User) {\n  localStorage.setItem('token', user.token);\n  axios.defaults.headers.Authorization = `Token ${user.token}`;\n  store.dispatch(loadUser(user));\n}\n","import { Err, Ok, Result } from '@hqoss/monads';\nimport axios from 'axios';\nimport { array, guard, object, string } from 'decoders';\nimport settings from '../config/settings';\nimport {\n  Article,\n  articleDecoder,\n  ArticleForEditor,\n  ArticlesFilters,\n  FeedFilters,\n  MultipleArticles,\n  multipleArticlesDecoder,\n} from '../types/article';\nimport { Comment, commentDecoder } from '../types/comment';\nimport { GenericErrors, genericErrorsDecoder } from '../types/error';\nimport { objectToQueryString } from '../types/object';\nimport { Profile, profileDecoder } from '../types/profile';\nimport { User, userDecoder, UserForRegistration, UserSettings } from '../types/user';\n\naxios.defaults.baseURL = settings.baseApiUrl;\n\nexport async function getArticles(filters: ArticlesFilters = {}): Promise<MultipleArticles> {\n  const finalFilters: ArticlesFilters = {\n    limit: 10,\n    offset: 0,\n    ...filters,\n  };\n  return guard(multipleArticlesDecoder)((await axios.get(`articles?${objectToQueryString(finalFilters)}`)).data);\n}\n\nexport async function getTags(): Promise<{ tags: string[] }> {\n  return guard(object({ tags: array(string) }))((await axios.get('tags')).data);\n}\n\nexport async function login(email: string, password: string): Promise<Result<User, GenericErrors>> {\n  try {\n    const { data } = await axios.post('users/login', { user: { email, password } });\n\n    return Ok(guard(object({ user: userDecoder }))(data).user);\n  } catch ({ response: { data } }) {\n    return Err(guard(object({ errors: genericErrorsDecoder }))(data).errors);\n  }\n}\n\nexport async function getUser(): Promise<User> {\n  const { data } = await axios.get('user');\n  return guard(object({ user: userDecoder }))(data).user;\n}\n\nexport async function favoriteArticle(slug: string): Promise<Article> {\n  return guard(object({ article: articleDecoder }))((await axios.post(`articles/${slug}/favorite`)).data).article;\n}\n\nexport async function unfavoriteArticle(slug: string): Promise<Article> {\n  return guard(object({ article: articleDecoder }))((await axios.delete(`articles/${slug}/favorite`)).data).article;\n}\n\nexport async function updateSettings(user: UserSettings): Promise<Result<User, GenericErrors>> {\n  try {\n    const { data } = await axios.put('user', user);\n\n    return Ok(guard(object({ user: userDecoder }))(data).user);\n  } catch ({ data }) {\n    return Err(guard(object({ errors: genericErrorsDecoder }))(data).errors);\n  }\n}\n\nexport async function signUp(user: UserForRegistration): Promise<Result<User, GenericErrors>> {\n  try {\n    const { data } = await axios.post('users', { user });\n\n    return Ok(guard(object({ user: userDecoder }))(data).user);\n  } catch ({ response: { data } }) {\n    return Err(guard(object({ errors: genericErrorsDecoder }))(data).errors);\n  }\n}\n\nexport async function createArticle(article: ArticleForEditor): Promise<Result<Article, GenericErrors>> {\n  try {\n    const { data } = await axios.post('articles', { article });\n\n    return Ok(guard(object({ article: articleDecoder }))(data).article);\n  } catch ({ response: { data } }) {\n    return Err(guard(object({ errors: genericErrorsDecoder }))(data).errors);\n  }\n}\n\nexport async function getArticle(slug: string): Promise<Article> {\n  const { data } = await axios.get(`articles/${slug}`);\n  return guard(object({ article: articleDecoder }))(data).article;\n}\n\nexport async function updateArticle(slug: string, article: ArticleForEditor): Promise<Result<Article, GenericErrors>> {\n  try {\n    const { data } = await axios.put(`articles/${slug}`, { article });\n\n    return Ok(guard(object({ article: articleDecoder }))(data).article);\n  } catch ({ response: { data } }) {\n    return Err(guard(object({ errors: genericErrorsDecoder }))(data).errors);\n  }\n}\n\nexport async function getProfile(username: string): Promise<Profile> {\n  const { data } = await axios.get(`profiles/${username}`);\n  return guard(object({ profile: profileDecoder }))(data).profile;\n}\n\nexport async function followUser(username: string): Promise<Profile> {\n  const { data } = await axios.post(`profiles/${username}/follow`);\n  return guard(object({ profile: profileDecoder }))(data).profile;\n}\n\nexport async function unfollowUser(username: string): Promise<Profile> {\n  const { data } = await axios.delete(`profiles/${username}/follow`);\n  return guard(object({ profile: profileDecoder }))(data).profile;\n}\n\nexport async function getFeed(filters: FeedFilters = {}): Promise<MultipleArticles> {\n  const finalFilters: ArticlesFilters = {\n    limit: 10,\n    offset: 0,\n    ...filters,\n  };\n  return guard(multipleArticlesDecoder)((await axios.get(`articles/feed?${objectToQueryString(finalFilters)}`)).data);\n}\n\nexport async function getArticleComments(slug: string): Promise<Comment[]> {\n  const { data } = await axios.get(`articles/${slug}/comments`);\n  return guard(object({ comments: array(commentDecoder) }))(data).comments;\n}\n\nexport async function deleteComment(slug: string, commentId: number): Promise<void> {\n  await axios.delete(`articles/${slug}/comments/${commentId}`);\n}\n\nexport async function createComment(slug: string, body: string): Promise<Comment> {\n  const { data } = await axios.post(`articles/${slug}/comments`, { comment: { body } });\n  return guard(object({ comment: commentDecoder }))(data).comment;\n}\n\nexport async function deleteArticle(slug: string): Promise<void> {\n  await axios.delete(`articles/${slug}`);\n}\n","import { useEffect, useState } from 'react';\nimport { State, store } from './store';\n\nexport function useStoreWithInitializer<T>(getter: (state: State) => T, initializer: () => unknown) {\n  const [state, setState] = useState(getter(store.getState()));\n  useEffect(() => {\n    const unsubscribe = store.subscribe(() => setState(getter(store.getState())));\n    initializer();\n    return unsubscribe;\n  }, [null]);\n  return state;\n}\n\nexport function useStore<T>(getter: (state: State) => T) {\n  return useStoreWithInitializer(getter, () => {});\n}\n","export interface GenericFormField {\n  name: string;\n  type: string;\n  placeholder: string;\n  rows?: number;\n  fieldType: 'input' | 'textarea' | 'list';\n  listName?: string;\n  lg: boolean;\n}\n\nexport function buildGenericFormField(data: Partial<GenericFormField> & { name: string }): GenericFormField {\n  return {\n    type: 'text',\n    placeholder: '',\n    fieldType: 'input',\n    lg: true,\n    ...data,\n  };\n}\n","export default {\n  baseApiUrl: 'https://api.realworld.io/api/',\n};\n","export function ContainerPage({ children }: { children: JSX.Element | JSX.Element[] }) {\n  return (\n    <div className='container page'>\n      <div className='row'> {children} </div>\n    </div>\n  );\n}\n","import React from 'react';\n\nexport function FormGroup({\n  type,\n  placeholder,\n  disabled,\n  value,\n  onChange,\n  lg,\n}: {\n  type: string;\n  placeholder: string;\n  disabled: boolean;\n  value: string;\n  lg: boolean;\n  onChange: (ev: React.ChangeEvent<HTMLInputElement>) => void;\n}) {\n  return (\n    <fieldset className='form-group'>\n      <input\n        className={`form-control${!lg ? '' : ' form-control-lg'}`}\n        {...{ type, placeholder, disabled, value, onChange }}\n      />\n    </fieldset>\n  );\n}\n\nexport function TextAreaFormGroup({\n  type,\n  placeholder,\n  disabled,\n  value,\n  rows,\n  onChange,\n  lg,\n}: {\n  type: string;\n  placeholder: string;\n  disabled: boolean;\n  rows: number;\n  value: string;\n  lg: boolean;\n  onChange: (ev: React.ChangeEvent<HTMLTextAreaElement>) => void;\n}) {\n  return (\n    <fieldset className='form-group'>\n      <textarea\n        className={`form-control${!lg ? '' : ' form-control-lg'}`}\n        {...{ type, placeholder, disabled, value, onChange, rows }}\n      ></textarea>\n    </fieldset>\n  );\n}\n\nexport function ListFormGroup({\n  type,\n  placeholder,\n  disabled,\n  value,\n  listValue,\n  lg,\n  onChange,\n  onEnter,\n  onRemoveItem,\n}: {\n  type: string;\n  placeholder: string;\n  disabled: boolean;\n  value: string;\n  listValue: string[];\n  lg: boolean;\n  onChange: (ev: React.ChangeEvent<HTMLInputElement>) => void;\n  onEnter: () => void;\n  onRemoveItem: (index: number) => void;\n}) {\n  return (\n    <fieldset className='form-group'>\n      <input\n        className={`form-control${!lg ? '' : ' form-control-lg'}`}\n        {...{ type, placeholder, disabled, value, onChange }}\n        onKeyDown={(ev) => ev.key === 'Enter' && ev.preventDefault()}\n        onKeyUp={onListFieldKeyUp(onEnter)}\n      />\n      <div className='tag-list'>\n        {listValue.map((value, index) => (\n          <span key={value} className='tag-default tag-pill' onClick={() => onRemoveItem(index)}>\n            <i className='ion-close-round'></i>\n            {value}\n          </span>\n        ))}\n      </div>\n    </fieldset>\n  );\n}\n\nexport function onListFieldKeyUp(onEnter: () => void): (ev: React.KeyboardEvent) => void {\n  return (ev) => {\n    if (ev.key === 'Enter') {\n      ev.preventDefault();\n      onEnter();\n    }\n  };\n}\n","import { GenericErrors } from '../../types/error';\n\nexport function Errors({ errors }: { errors: GenericErrors }) {\n  return (\n    <ul className='error-messages'>\n      {Object.entries(errors).map(([field, fieldErrors]) =>\n        fieldErrors.map((fieldError) => (\n          <li key={field + fieldError}>\n            {field} {fieldError}\n          </li>\n        ))\n      )}\n    </ul>\n  );\n}\n","import { FC, Fragment } from 'react';\nimport { FormGroup, ListFormGroup, TextAreaFormGroup } from '../FormGroup/FormGroup';\nimport { GenericFormField } from '../../types/genericFormField';\nimport { GenericErrors } from '../../types/error';\nimport { Errors } from '../Errors/Errors';\n\nexport interface GenericFormProps {\n  fields: GenericFormField[];\n  disabled: boolean;\n  formObject: Record<string, string | null>;\n  submitButtonText: string;\n  errors: GenericErrors;\n  onChange: (name: string, value: string) => void;\n  onSubmit: (ev: React.FormEvent) => void;\n  onAddItemToList?: (name: string) => void;\n  onRemoveListItem?: (name: string, index: number) => void;\n}\n\nexport const GenericForm: FC<GenericFormProps> = ({\n  fields,\n  disabled,\n  formObject,\n  submitButtonText,\n  errors,\n  onChange,\n  onSubmit,\n  onAddItemToList,\n  onRemoveListItem,\n}) => (\n  <Fragment>\n    <Errors errors={errors} />\n\n    <form onSubmit={onSubmit}>\n      <fieldset>\n        {fields.map((field) =>\n          field.fieldType === 'input' ? (\n            <FormGroup\n              key={field.name}\n              disabled={disabled}\n              type={field.type}\n              placeholder={field.placeholder}\n              value={formObject[field.name] || ''}\n              onChange={onUpdateField(field.name, onChange)}\n              lg={field.lg}\n            />\n          ) : field.fieldType === 'textarea' ? (\n            <TextAreaFormGroup\n              key={field.name}\n              disabled={disabled}\n              type={field.type}\n              placeholder={field.placeholder}\n              value={formObject[field.name] || ''}\n              rows={field.rows as number}\n              onChange={onUpdateField(field.name, onChange)}\n              lg={field.lg}\n            />\n          ) : (\n            <ListFormGroup\n              key={field.name}\n              disabled={disabled}\n              type={field.type}\n              placeholder={field.placeholder}\n              value={formObject[field.name] || ''}\n              onChange={onUpdateField(field.name, onChange)}\n              listValue={formObject[field.listName as string] as unknown as string[]}\n              onEnter={() => onAddItemToList && field.listName && onAddItemToList(field.listName)}\n              onRemoveItem={(index) => onRemoveListItem && field.listName && onRemoveListItem(field.listName, index)}\n              lg={field.lg}\n            />\n          )\n        )}\n        <button className='btn btn-lg btn-primary pull-xs-right'>{submitButtonText}</button>\n      </fieldset>\n    </form>\n  </Fragment>\n);\n\nfunction onUpdateField(\n  name: string,\n  onChange: GenericFormProps['onChange']\n): (ev: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => void {\n  return ({ target: { value } }) => {\n    onChange(name, value);\n  };\n}\n","import React from 'react';\nimport { store } from '../../state/store';\nimport { useStore } from '../../state/storeHooks';\nimport { buildGenericFormField } from '../../types/genericFormField';\nimport { ContainerPage } from '../ContainerPage/ContainerPage';\nimport { GenericForm } from '../GenericForm/GenericForm';\nimport { addTag, EditorState, removeTag, updateField } from './ArticleEditor.slice';\n\nexport function ArticleEditor({ onSubmit }: { onSubmit: (ev: React.FormEvent) => void }) {\n  const { article, submitting, tag, errors } = useStore(({ editor }) => editor);\n\n  return (\n    <div className='editor-page'>\n      <ContainerPage>\n        <div className='col-md-10 offset-md-1 col-xs-12'>\n          <GenericForm\n            formObject={{ ...article, tag } as unknown as Record<string, string | null>}\n            disabled={submitting}\n            errors={errors}\n            onChange={onUpdateField}\n            onSubmit={onSubmit}\n            submitButtonText='Publish Article'\n            onAddItemToList={onAddTag}\n            onRemoveListItem={onRemoveTag}\n            fields={[\n              buildGenericFormField({ name: 'title', placeholder: 'Article Title' }),\n              buildGenericFormField({ name: 'description', placeholder: \"What's this article about?\", lg: false }),\n              buildGenericFormField({\n                name: 'body',\n                placeholder: 'Write your article (in markdown)',\n                fieldType: 'textarea',\n                rows: 8,\n                lg: false,\n              }),\n              buildGenericFormField({\n                name: 'tag',\n                placeholder: 'Enter Tags',\n                listName: 'tagList',\n                fieldType: 'list',\n                lg: false,\n              }),\n            ]}\n          />\n        </div>\n      </ContainerPage>\n    </div>\n  );\n}\n\nfunction onUpdateField(name: string, value: string) {\n  store.dispatch(updateField({ name: name as keyof EditorState['article'], value }));\n}\n\nfunction onAddTag() {\n  store.dispatch(addTag());\n}\n\nfunction onRemoveTag(_: string, index: number) {\n  store.dispatch(removeTag(index));\n}\n","import React, { Fragment, useEffect } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { getArticle, updateArticle } from '../../../services/conduit';\nimport { store } from '../../../state/store';\nimport { useStore } from '../../../state/storeHooks';\nimport { ArticleEditor } from '../../ArticleEditor/ArticleEditor';\nimport { initializeEditor, loadArticle, startSubmitting, updateErrors } from '../../ArticleEditor/ArticleEditor.slice';\n\nexport function EditArticle() {\n  const { slug } = useParams<{ slug: string }>();\n  const { loading } = useStore(({ editor }) => editor);\n\n  useEffect(() => {\n    _loadArticle(slug);\n  }, [slug]);\n\n  return <Fragment>{!loading && <ArticleEditor onSubmit={onSubmit(slug)} />}</Fragment>;\n}\n\nasync function _loadArticle(slug: string) {\n  store.dispatch(initializeEditor());\n  try {\n    const { title, description, body, tagList, author } = await getArticle(slug);\n\n    if (author.username !== store.getState().app.user.unwrap().username) {\n      location.hash = '#/';\n      return;\n    }\n\n    store.dispatch(loadArticle({ title, description, body, tagList }));\n  } catch {\n    location.hash = '#/';\n  }\n}\n\nfunction onSubmit(slug: string): (ev: React.FormEvent) => void {\n  return async (ev) => {\n    ev.preventDefault();\n\n    store.dispatch(startSubmitting());\n    const result = await updateArticle(slug, store.getState().editor.article);\n\n    result.match({\n      err: (errors) => store.dispatch(updateErrors(errors)),\n      ok: ({ slug }) => {\n        location.hash = `#/article/${slug}`;\n      },\n    });\n  };\n}\n","export function Footer() {\n  return (\n    <footer>\n      <div className='container'>\n        <a href='/#/' className='logo-font'>\n          conduit\n        </a>\n        <span className='attribution'>\n          An interactive learning project from <a href='https://thinkster.io'>Thinkster</a>. Code &amp; design licensed\n          under MIT.\n        </span>\n      </div>\n    </footer>\n  );\n}\n","import { Fragment } from 'react';\nimport { HashRouter, NavLink } from 'react-router-dom';\nimport { useStore } from '../../state/storeHooks';\nimport { User } from '../../types/user';\n\nexport function Header() {\n  const { user } = useStore(({ app }) => app);\n\n  return (\n    <nav className='navbar navbar-light'>\n      <div className='container'>\n        <a className='navbar-brand' href='/#/'>\n          conduit\n        </a>\n        <ul className='nav navbar-nav pull-xs-right'>\n          <HashRouter>\n            <NavItem text='Home' href='/' />\n\n            {user.match({\n              none: () => <GuestLinks />,\n              some: (user) => <UserLinks user={user} />,\n            })}\n          </HashRouter>\n        </ul>\n      </div>\n    </nav>\n  );\n}\n\nfunction NavItem({ text, href, icon }: { text: string; href: string; icon?: string }) {\n  return (\n    <li className='nav-item'>\n      <NavLink exact to={href} activeClassName='active' className='nav-link'>\n        {icon && <i className={icon}></i>}&nbsp;\n        {text}\n      </NavLink>\n    </li>\n  );\n}\n\nfunction GuestLinks() {\n  return (\n    <Fragment>\n      <NavItem text='Sign in' href='/login' />\n      <NavItem text='Sign up' href='/register' />\n    </Fragment>\n  );\n}\n\nfunction UserLinks({ user: { username } }: { user: User }) {\n  return (\n    <Fragment>\n      <NavItem text='New Article' href='/editor' icon='ion-compose' />\n      <NavItem text='Settings' href='/settings' icon='ion-gear-a' />\n      <NavItem text={`${username}`} href={`/profile/${username}`} />\n    </Fragment>\n  );\n}\n","export function classObjectToClassName(obj: Record<string, boolean>): string {\n  return Object.entries(obj)\n    .filter(([, active]) => active)\n    .map(([name]) => name)\n    .join(' ');\n}\n","import { format } from 'date-fns';\nimport { Link } from 'react-router-dom';\nimport { Article } from '../../types/article';\n\nexport function ArticlePreview({\n  article: {\n    createdAt,\n    favorited,\n    favoritesCount,\n    slug,\n    title,\n    description,\n    tagList,\n    author: { image, username },\n  },\n  isSubmitting,\n  onFavoriteToggle,\n}: {\n  article: Article;\n  isSubmitting: boolean;\n  onFavoriteToggle?: () => void;\n}) {\n  return (\n    <div className='article-preview'>\n      <div className='article-meta'>\n        <Link to={`/profile/${username}`} className='author'>\n          <img src={image || undefined} />\n        </Link>\n        <div className='info'>\n          <Link to={`/profile/${username}`} className='author'>\n            {username}\n          </Link>\n          <span className='date'>{format(createdAt, 'PP')}</span>\n        </div>\n        <button\n          className={`btn btn-sm pull-xs-right ${favorited ? 'btn-primary' : 'btn-outline-primary'}`}\n          aria-label='Toggle Favorite'\n          disabled={isSubmitting}\n          onClick={onFavoriteToggle}\n        >\n          <i className='ion-heart'></i> {favoritesCount}\n        </button>\n      </div>\n      <a href={`/#/article/${slug}`} className='preview-link'>\n        <h1>{title}</h1>\n        <p>{description}</p>\n        <span>Read more...</span>\n        <TagList tagList={tagList} />\n      </a>\n    </div>\n  );\n}\n\nexport function TagList({ tagList }: { tagList: string[] }) {\n  return (\n    <ul className='tag-list'>\n      {tagList.map((tag) => (\n        <li key={tag} className='tag-default tag-pill tag-outline'>\n          {tag}\n        </li>\n      ))}\n    </ul>\n  );\n}\n","import { range } from 'ramda';\n\nexport function Pagination({\n  currentPage,\n  count,\n  itemsPerPage,\n  onPageChange,\n}: {\n  currentPage: number;\n  count: number;\n  itemsPerPage: number;\n  onPageChange?: (index: number) => void;\n}) {\n  return (\n    <nav>\n      <ul className='pagination'>\n        {Math.ceil(count / itemsPerPage) > 1 &&\n          range(1, Math.ceil(count / itemsPerPage) + 1).map((index) => (\n            <li\n              key={index}\n              className={`page-item${currentPage !== index ? '' : ' active'}`}\n              onClick={onPageChange && (() => onPageChange(index))}\n            >\n              <a className='page-link' aria-label={`Go to page number ${index}`} href='#'>\n                {index}\n              </a>\n            </li>\n          ))}\n      </ul>\n    </nav>\n  );\n}\n","import { Fragment } from 'react';\nimport { favoriteArticle, unfavoriteArticle } from '../../services/conduit';\nimport { store } from '../../state/store';\nimport { useStore } from '../../state/storeHooks';\nimport { Article } from '../../types/article';\nimport { classObjectToClassName } from '../../types/style';\nimport { ArticlePreview } from '../ArticlePreview/ArticlePreview';\nimport { Pagination } from '../Pagination/Pagination';\nimport { ArticleViewerState, endSubmittingFavorite, startSubmittingFavorite } from './ArticlesViewer.slice';\n\nexport function ArticlesViewer({\n  toggleClassName,\n  tabs,\n  selectedTab,\n  onPageChange,\n  onTabChange,\n}: {\n  toggleClassName: string;\n  tabs: string[];\n  selectedTab: string;\n  onPageChange?: (index: number) => void;\n  onTabChange?: (tab: string) => void;\n}) {\n  const { articles, articlesCount, currentPage } = useStore(({ articleViewer }) => articleViewer);\n\n  return (\n    <Fragment>\n      <ArticlesTabSet {...{ tabs, selectedTab, toggleClassName, onTabChange }} />\n      <ArticleList articles={articles} />\n      <Pagination currentPage={currentPage} count={articlesCount} itemsPerPage={10} onPageChange={onPageChange} />\n    </Fragment>\n  );\n}\n\nfunction ArticlesTabSet({\n  tabs,\n  toggleClassName,\n  selectedTab,\n  onTabChange,\n}: {\n  tabs: string[];\n  toggleClassName: string;\n  selectedTab: string;\n  onTabChange?: (tab: string) => void;\n}) {\n  return (\n    <div className={toggleClassName}>\n      <ul className='nav nav-pills outline-active'>\n        {tabs.map((tab) => (\n          <Tab key={tab} tab={tab} active={tab === selectedTab} onClick={() => onTabChange && onTabChange(tab)} />\n        ))}\n      </ul>\n    </div>\n  );\n}\n\nfunction Tab({ tab, active, onClick }: { tab: string; active: boolean; onClick: () => void }) {\n  return (\n    <li className='nav-item'>\n      <a\n        className={classObjectToClassName({ 'nav-link': true, active })}\n        href='#'\n        onClick={(ev) => {\n          ev.preventDefault();\n          onClick();\n        }}\n      >\n        {tab}\n      </a>\n    </li>\n  );\n}\n\nfunction ArticleList({ articles }: { articles: ArticleViewerState['articles'] }) {\n  return articles.match({\n    none: () => (\n      <div className='article-preview' key={1}>\n        Loading articles...\n      </div>\n    ),\n    some: (articles) => (\n      <Fragment>\n        {articles.length === 0 && (\n          <div className='article-preview' key={1}>\n            No articles are here... yet.\n          </div>\n        )}\n        {articles.map(({ article, isSubmitting }, index) => (\n          <ArticlePreview\n            key={article.slug}\n            article={article}\n            isSubmitting={isSubmitting}\n            onFavoriteToggle={isSubmitting ? undefined : onFavoriteToggle(index, article)}\n          />\n        ))}\n      </Fragment>\n    ),\n  });\n}\n\nfunction onFavoriteToggle(index: number, { slug, favorited }: Article) {\n  return async () => {\n    if (store.getState().app.user.isNone()) {\n      location.hash = '#/login';\n      return;\n    }\n    store.dispatch(startSubmittingFavorite(index));\n\n    const article = await (favorited ? unfavoriteArticle(slug) : favoriteArticle(slug));\n    store.dispatch(endSubmittingFavorite({ index, article }));\n  };\n}\n","import { Option } from '@hqoss/monads';\nimport { getArticles, getFeed, getTags } from '../../../services/conduit';\nimport { store } from '../../../state/store';\nimport { useStoreWithInitializer } from '../../../state/storeHooks';\nimport { FeedFilters } from '../../../types/article';\nimport { ArticlesViewer } from '../../ArticlesViewer/ArticlesViewer';\nimport { changePage, loadArticles, startLoadingArticles } from '../../ArticlesViewer/ArticlesViewer.slice';\nimport { ContainerPage } from '../../ContainerPage/ContainerPage';\nimport { changeTab, loadTags, startLoadingTags } from './Home.slice';\n\nexport function Home() {\n  const { tags, selectedTab } = useStoreWithInitializer(({ home }) => home, load);\n\n  return (\n    <div className='home-page'>\n      {renderBanner()}\n      <ContainerPage>\n        <div className='col-md-9'>\n          <ArticlesViewer\n            toggleClassName='feed-toggle'\n            selectedTab={selectedTab}\n            tabs={buildTabsNames(selectedTab)}\n            onPageChange={onPageChange}\n            onTabChange={onTabChange}\n          />\n        </div>\n\n        <div className='col-md-3'>\n          <HomeSidebar tags={tags} />\n        </div>\n      </ContainerPage>\n    </div>\n  );\n}\n\nasync function load() {\n  store.dispatch(startLoadingArticles());\n  store.dispatch(startLoadingTags());\n\n  if (store.getState().app.user.isSome()) {\n    store.dispatch(changeTab('Your Feed'));\n  }\n\n  const multipleArticles = await getFeedOrGlobalArticles();\n  store.dispatch(loadArticles(multipleArticles));\n\n  const tagsResult = await getTags();\n  store.dispatch(loadTags(tagsResult.tags));\n}\n\nfunction renderBanner() {\n  return (\n    <div className='banner'>\n      <div className='container'>\n        <h1 className='logo-font'>conduit</h1>\n        <p>A place to share your knowledge.</p>\n      </div>\n    </div>\n  );\n}\n\nfunction buildTabsNames(selectedTab: string) {\n  const { user } = store.getState().app;\n\n  return Array.from(new Set([...(user.isSome() ? ['Your Feed'] : []), 'Global Feed', selectedTab]));\n}\n\nasync function onPageChange(index: number) {\n  store.dispatch(changePage(index));\n\n  const multipleArticles = await getFeedOrGlobalArticles({ offset: (index - 1) * 10 });\n  store.dispatch(loadArticles(multipleArticles));\n}\n\nasync function onTabChange(tab: string) {\n  store.dispatch(changeTab(tab));\n  store.dispatch(startLoadingArticles());\n\n  const multipleArticles = await getFeedOrGlobalArticles();\n  store.dispatch(loadArticles(multipleArticles));\n}\n\nasync function getFeedOrGlobalArticles(filters: FeedFilters = {}) {\n  const { selectedTab } = store.getState().home;\n  const finalFilters = {\n    ...filters,\n    tag: selectedTab.slice(2),\n  };\n\n  return await (selectedTab === 'Your Feed' ? getFeed : getArticles)(\n    !selectedTab.startsWith('#') ? filters : finalFilters\n  );\n}\n\nfunction HomeSidebar({ tags }: { tags: Option<string[]> }) {\n  return (\n    <div className='sidebar'>\n      <p>Popular Tags</p>\n\n      {tags.match({\n        none: () => <span>Loading tags...</span>,\n        some: (tags) => (\n          <div className='tag-list'>\n            {' '}\n            {tags.map((tag) => (\n              <a key={tag} href='#' className='tag-pill tag-default' onClick={() => onTabChange(`# ${tag}`)}>\n                {tag}\n              </a>\n            ))}{' '}\n          </div>\n        ),\n      })}\n    </div>\n  );\n}\n","import React from 'react';\nimport { login } from '../../../services/conduit';\nimport { dispatchOnCall, store } from '../../../state/store';\nimport { useStoreWithInitializer } from '../../../state/storeHooks';\nimport { loadUserIntoApp } from '../../../types/user';\nimport { buildGenericFormField } from '../../../types/genericFormField';\nimport { GenericForm } from '../../GenericForm/GenericForm';\nimport { initializeLogin, LoginState, startLoginIn, updateErrors, updateField } from './Login.slice';\nimport { ContainerPage } from '../../ContainerPage/ContainerPage';\n\nexport function Login() {\n  const { errors, loginIn, user } = useStoreWithInitializer(({ login }) => login, dispatchOnCall(initializeLogin()));\n\n  return (\n    <div className='auth-page'>\n      <ContainerPage>\n        <div className='col-md-6 offset-md-3 col-xs-12'>\n          <h1 className='text-xs-center'>Sign in</h1>\n          <p className='text-xs-center'>\n            <a href='/#/register'>Need an account?</a>\n          </p>\n\n          <GenericForm\n            disabled={loginIn}\n            formObject={user}\n            submitButtonText='Sign in'\n            errors={errors}\n            onChange={onUpdateField}\n            onSubmit={signIn}\n            fields={[\n              buildGenericFormField({ name: 'email', placeholder: 'Email' }),\n              buildGenericFormField({ name: 'password', placeholder: 'Password', type: 'password' }),\n            ]}\n          />\n        </div>\n      </ContainerPage>\n    </div>\n  );\n}\n\nfunction onUpdateField(name: string, value: string) {\n  store.dispatch(updateField({ name: name as keyof LoginState['user'], value }));\n}\n\nasync function signIn(ev: React.FormEvent) {\n  ev.preventDefault();\n\n  if (store.getState().login.loginIn) return;\n  store.dispatch(startLoginIn());\n\n  const { email, password } = store.getState().login.user;\n  const result = await login(email, password);\n\n  result.match({\n    ok: (user) => {\n      location.hash = '#/';\n      loadUserIntoApp(user);\n    },\n    err: (e) => {\n      store.dispatch(updateErrors(e));\n    },\n  });\n}\n","import { FormEvent, useEffect } from 'react';\nimport { createArticle } from '../../../services/conduit';\nimport { store } from '../../../state/store';\nimport { ArticleEditor } from '../../ArticleEditor/ArticleEditor';\nimport { initializeEditor, startSubmitting, updateErrors } from '../../ArticleEditor/ArticleEditor.slice';\n\nexport function NewArticle() {\n  useEffect(() => {\n    store.dispatch(initializeEditor());\n  }, [null]);\n\n  return <ArticleEditor onSubmit={onSubmit} />;\n}\n\nasync function onSubmit(ev: FormEvent) {\n  ev.preventDefault();\n  store.dispatch(startSubmitting());\n  const result = await createArticle(store.getState().editor.article);\n\n  result.match({\n    err: (errors) => store.dispatch(updateErrors(errors)),\n    ok: ({ slug }) => {\n      location.hash = `#/article/${slug}`;\n    },\n  });\n}\n","import { dispatchOnCall, store } from '../../../state/store';\nimport { useStoreWithInitializer } from '../../../state/storeHooks';\nimport { buildGenericFormField } from '../../../types/genericFormField';\nimport { GenericForm } from '../../GenericForm/GenericForm';\nimport { initializeRegister, RegisterState, startSigningUp, updateErrors, updateField } from './Register.slice';\nimport { loadUserIntoApp, UserForRegistration } from '../../../types/user';\nimport { signUp } from '../../../services/conduit';\nimport { ContainerPage } from '../../ContainerPage/ContainerPage';\n\nexport function Register() {\n  const { errors, signingUp, user } = useStoreWithInitializer(\n    ({ register }) => register,\n    dispatchOnCall(initializeRegister())\n  );\n\n  return (\n    <div className='auth-page'>\n      <ContainerPage>\n        <div className='col-md-6 offset-md-3 col-xs-12'>\n          <h1 className='text-xs-center'>Sign up</h1>\n          <p className='text-xs-center'>\n            <a href='/#/login'>Have an account?</a>\n          </p>\n\n          <GenericForm\n            disabled={signingUp}\n            formObject={user as unknown as Record<string, string>}\n            submitButtonText='Sign up'\n            errors={errors}\n            onChange={onUpdateField}\n            onSubmit={onSignUp(user)}\n            fields={[\n              buildGenericFormField({ name: 'username', placeholder: 'Username' }),\n              buildGenericFormField({ name: 'email', placeholder: 'Email' }),\n              buildGenericFormField({ name: 'password', placeholder: 'Password', type: 'password' }),\n            ]}\n          />\n        </div>\n      </ContainerPage>\n    </div>\n  );\n}\n\nfunction onUpdateField(name: string, value: string) {\n  store.dispatch(updateField({ name: name as keyof RegisterState['user'], value }));\n}\n\nfunction onSignUp(user: UserForRegistration) {\n  return async (ev: React.FormEvent) => {\n    ev.preventDefault();\n    store.dispatch(startSigningUp());\n    const result = await signUp(user);\n\n    result.match({\n      err: (e) => store.dispatch(updateErrors(e)),\n      ok: (user) => {\n        location.hash = '#/';\n        loadUserIntoApp(user);\n      },\n    });\n  };\n}\n","import axios from 'axios';\nimport React from 'react';\nimport { updateSettings } from '../../../services/conduit';\nimport { store } from '../../../state/store';\nimport { useStore } from '../../../state/storeHooks';\nimport { UserSettings } from '../../../types/user';\nimport { buildGenericFormField } from '../../../types/genericFormField';\nimport { loadUser, logout } from '../../App/App.slice';\nimport { GenericForm } from '../../GenericForm/GenericForm';\nimport { SettingsState, startUpdate, updateErrors, updateField } from './Settings.slice';\nimport { ContainerPage } from '../../ContainerPage/ContainerPage';\n\nexport interface SettingsField {\n  name: keyof UserSettings;\n  type?: string;\n  isTextArea?: true;\n  placeholder: string;\n}\n\nexport function Settings() {\n  const { user, errors, updating } = useStore(({ settings }) => settings);\n\n  return (\n    <div className='settings-page'>\n      <ContainerPage>\n        <div className='col-md-6 offset-md-3 col-xs-12'>\n          <h1 className='text-xs-center'>Your Settings</h1>\n\n          <GenericForm\n            disabled={updating}\n            formObject={{ ...user }}\n            submitButtonText='Update Settings'\n            errors={errors}\n            onChange={onUpdateField}\n            onSubmit={onUpdateSettings(user)}\n            fields={[\n              buildGenericFormField({ name: 'image', placeholder: 'URL of profile picture' }),\n              buildGenericFormField({ name: 'username', placeholder: 'Your Name' }),\n              buildGenericFormField({\n                name: 'bio',\n                placeholder: 'Short bio about you',\n                rows: 8,\n                fieldType: 'textarea',\n              }),\n              buildGenericFormField({ name: 'email', placeholder: 'Email' }),\n              buildGenericFormField({ name: 'password', placeholder: 'Password', type: 'password' }),\n            ]}\n          />\n\n          <hr />\n          <button className='btn btn-outline-danger' onClick={_logout}>\n            Or click here to logout.\n          </button>\n        </div>\n      </ContainerPage>\n    </div>\n  );\n}\n\nfunction onUpdateField(name: string, value: string) {\n  store.dispatch(updateField({ name: name as keyof SettingsState['user'], value }));\n}\n\nfunction onUpdateSettings(user: UserSettings) {\n  return async (ev: React.FormEvent) => {\n    ev.preventDefault();\n    store.dispatch(startUpdate());\n    const result = await updateSettings(user);\n\n    result.match({\n      err: (e) => store.dispatch(updateErrors(e)),\n      ok: (user) => {\n        store.dispatch(loadUser(user));\n        location.hash = '/';\n      },\n    });\n  };\n}\n\nfunction _logout() {\n  delete axios.defaults.headers.Authorization;\n  localStorage.removeItem('token');\n  store.dispatch(logout());\n  location.hash = '/';\n}\n","export function redirect(path: string) {\n  location.hash = `#/${path}`;\n}\n","import { useStore } from '../../state/storeHooks';\nimport { Profile } from '../../types/profile';\n\nexport function UserInfo({\n  user: { image, username, bio, following },\n  disabled,\n  onFollowToggle,\n  onEditSettings,\n}: {\n  user: Profile;\n  disabled: boolean;\n  onFollowToggle?: () => void;\n  onEditSettings?: () => void;\n}) {\n  const { user } = useStore(({ app }) => app);\n  const sessionUsername = user.map((x) => x.username).unwrapOr('');\n\n  return (\n    <div className='user-info'>\n      <div className='container'>\n        <div className='row'>\n          <div className='col-xs-12 col-md-10 offset-md-1'>\n            <img src={image || undefined} className='user-img' />\n            <h4>{username}</h4>\n            <p>{bio}</p>\n\n            {sessionUsername === username ? (\n              <EditProfileButton onClick={onEditSettings} disabled={disabled} />\n            ) : (\n              <ToggleFollowButton\n                following={following}\n                username={username}\n                disabled={disabled}\n                onClick={onFollowToggle}\n              />\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nfunction ToggleFollowButton({\n  following,\n  username,\n  disabled,\n  onClick,\n}: {\n  following: boolean;\n  username: string;\n  disabled: boolean;\n  onClick?: () => void;\n}) {\n  return (\n    <button className='btn btn-sm btn-outline-secondary action-btn' onClick={onClick} disabled={disabled}>\n      <i className='ion-plus-round'></i>\n      &nbsp;\n      {following ? ' Unfollow' : ' Follow'} {username}\n    </button>\n  );\n}\n\nfunction EditProfileButton({ disabled, onClick }: { disabled: boolean; onClick?: () => void }) {\n  return (\n    <button className='btn btn-sm btn-outline-secondary action-btn' onClick={onClick} disabled={disabled}>\n      <i className='ion-gear-a'></i>&nbsp; Edit Profile Settings\n    </button>\n  );\n}\n","import { useEffect } from 'react';\nimport { useLocation, useParams } from 'react-router-dom';\nimport { followUser, getArticles, getProfile, unfollowUser } from '../../../services/conduit';\nimport { store } from '../../../state/store';\nimport { useStore } from '../../../state/storeHooks';\nimport { redirect } from '../../../types/location';\nimport { Profile } from '../../../types/profile';\nimport { ArticlesViewer } from '../../ArticlesViewer/ArticlesViewer';\nimport { changePage, loadArticles, startLoadingArticles } from '../../ArticlesViewer/ArticlesViewer.slice';\nimport { UserInfo } from '../../UserInfo/UserInfo';\nimport { initializeProfile, loadProfile, startSubmitting } from './ProfilePage.slice';\n\nexport function ProfilePage() {\n  const { username } = useParams<{ username: string }>();\n  const favorites = useLocation().pathname.endsWith('favorites');\n\n  useEffect(() => {\n    onLoad(username, favorites);\n  }, [username]);\n\n  const { profile, submitting } = useStore(({ profile }) => profile);\n\n  return (\n    <div className='profile-page'>\n      {profile.match({\n        none: () => (\n          <div className='article-preview' key={1}>\n            Loading profile...\n          </div>\n        ),\n        some: (profile) => (\n          <UserInfo\n            user={profile}\n            disabled={submitting}\n            onFollowToggle={onFollowToggle(profile)}\n            onEditSettings={() => redirect('settings')}\n          />\n        ),\n      })}\n\n      <div className='container'>\n        <div className='row'>\n          <div className='col-xs-12 col-md-10 offset-md-1'>\n            <ArticlesViewer\n              toggleClassName='articles-toggle'\n              tabs={['My Articles', 'Favorited Articles']}\n              selectedTab={favorites ? 'Favorited Articles' : 'My Articles'}\n              onTabChange={onTabChange(username)}\n              onPageChange={onPageChange(username, favorites)}\n            />\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nasync function onLoad(username: string, favorites: boolean) {\n  store.dispatch(initializeProfile());\n  store.dispatch(startLoadingArticles());\n\n  try {\n    const profile = await getProfile(username);\n    store.dispatch(loadProfile(profile));\n\n    const articles = await getArticlesByType(username, favorites);\n    store.dispatch(loadArticles(articles));\n  } catch {\n    location.href = '#/';\n  }\n}\n\nasync function getArticlesByType(username: string, favorites: boolean) {\n  const { currentPage } = store.getState().articleViewer;\n  return await getArticles({ [favorites ? 'favorited' : 'author']: username, offset: (currentPage - 1) * 10 });\n}\n\nfunction onFollowToggle(profile: Profile): () => void {\n  return async () => {\n    const { user } = store.getState().app;\n    if (user.isNone()) {\n      redirect('register');\n      return;\n    }\n\n    store.dispatch(startSubmitting());\n\n    const newProfile = await (profile.following ? unfollowUser : followUser)(profile.username);\n    store.dispatch(loadProfile(newProfile));\n  };\n}\n\nfunction onTabChange(username: string): (page: string) => void {\n  return async (page) => {\n    const favorited = page === 'Favorited Articles';\n    location.hash = `#/profile/${username}${!favorited ? '' : '/favorites'}`;\n    store.dispatch(startLoadingArticles());\n    store.dispatch(loadArticles(await getArticlesByType(username, favorited)));\n  };\n}\n\nfunction onPageChange(username: string, favorited: boolean): (index: number) => void {\n  return async (index) => {\n    store.dispatch(changePage(index));\n    store.dispatch(loadArticles(await getArticlesByType(username, favorited)));\n  };\n}\n","import { Option } from '@hqoss/monads';\nimport { format } from 'date-fns';\nimport React, { Fragment, useEffect } from 'react';\nimport { Link, useParams } from 'react-router-dom';\nimport {\n  createComment,\n  deleteArticle,\n  deleteComment,\n  favoriteArticle,\n  followUser,\n  getArticle,\n  getArticleComments,\n  unfavoriteArticle,\n  unfollowUser,\n} from '../../../services/conduit';\nimport { store } from '../../../state/store';\nimport { useStore } from '../../../state/storeHooks';\nimport { Article } from '../../../types/article';\nimport { Comment } from '../../../types/comment';\nimport { redirect } from '../../../types/location';\nimport { classObjectToClassName } from '../../../types/style';\nimport { User } from '../../../types/user';\nimport { TagList } from '../../ArticlePreview/ArticlePreview';\nimport {\n  CommentSectionState,\n  initializeArticlePage,\n  loadArticle,\n  loadComments,\n  MetaSectionState,\n  startDeletingArticle,\n  startSubmittingComment,\n  startSubmittingFavorite,\n  startSubmittingFollow,\n  updateAuthor,\n  updateCommentBody,\n} from './ArticlePage.slice';\n\nexport function ArticlePage() {\n  const { slug } = useParams<{ slug: string }>();\n\n  const {\n    articlePage: { article, commentSection, metaSection },\n    app: { user },\n  } = useStore(({ articlePage, app }) => ({\n    articlePage,\n    app,\n  }));\n\n  useEffect(() => {\n    onLoad(slug);\n  }, [slug]);\n\n  return article.match({\n    none: () => <div>Loading article...</div>,\n    some: (article) => (\n      <div className='article-page'>\n        <ArticlePageBanner {...{ article, metaSection, user }} />\n\n        <div className='container page'>\n          <div className='row article-content'>\n            <div className='col-md-12'>{article.body}</div>\n            <TagList tagList={article.tagList} />\n          </div>\n\n          <hr />\n\n          <div className='article-actions'>\n            <ArticleMeta {...{ article, metaSection, user }} />\n          </div>\n\n          <CommentSection {...{ user, commentSection, article }} />\n        </div>\n      </div>\n    ),\n  });\n}\n\nasync function onLoad(slug: string) {\n  store.dispatch(initializeArticlePage());\n\n  try {\n    const article = await getArticle(slug);\n    store.dispatch(loadArticle(article));\n\n    const comments = await getArticleComments(slug);\n    store.dispatch(loadComments(comments));\n  } catch {\n    redirect('');\n  }\n}\n\nfunction ArticlePageBanner(props: { article: Article; metaSection: MetaSectionState; user: Option<User> }) {\n  return (\n    <div className='banner'>\n      <div className='container'>\n        <h1>{props.article.title}</h1>\n\n        <ArticleMeta {...props} />\n      </div>\n    </div>\n  );\n}\n\nfunction ArticleMeta({\n  article,\n  metaSection: { submittingFavorite, submittingFollow, deletingArticle },\n  user,\n}: {\n  article: Article;\n  metaSection: MetaSectionState;\n  user: Option<User>;\n}) {\n  return (\n    <div className='article-meta'>\n      <ArticleAuthorInfo article={article} />\n\n      {user.isSome() && user.unwrap().username === article.author.username ? (\n        <OwnerArticleMetaActions article={article} deletingArticle={deletingArticle} />\n      ) : (\n        <NonOwnerArticleMetaActions\n          article={article}\n          submittingFavorite={submittingFavorite}\n          submittingFollow={submittingFollow}\n        />\n      )}\n    </div>\n  );\n}\n\nfunction ArticleAuthorInfo({\n  article: {\n    author: { username, image },\n    createdAt,\n  },\n}: {\n  article: Article;\n}) {\n  return (\n    <Fragment>\n      <Link to={`/profile/${username}`}>\n        <img src={image || undefined} />\n      </Link>\n      <div className='info'>\n        <Link className='author' to={`/profile/${username}`}>\n          {username}\n        </Link>\n        <span className='date'>{format(createdAt, 'PP')}</span>\n      </div>\n    </Fragment>\n  );\n}\n\nfunction NonOwnerArticleMetaActions({\n  article: {\n    slug,\n    favoritesCount,\n    favorited,\n    author: { username, following },\n  },\n  submittingFavorite,\n  submittingFollow,\n}: {\n  article: Article;\n  submittingFavorite: boolean;\n  submittingFollow: boolean;\n}) {\n  return (\n    <Fragment>\n      <button\n        className={classObjectToClassName({\n          btn: true,\n          'btn-sm': true,\n          'btn-outline-secondary': !following,\n          'btn-secondary': following,\n        })}\n        disabled={submittingFollow}\n        onClick={() => onFollow(username, following)}\n      >\n        <i className='ion-plus-round'></i>\n        &nbsp; {(following ? 'Unfollow ' : 'Follow ') + username}\n      </button>\n      &nbsp;\n      <button\n        className={classObjectToClassName({\n          btn: true,\n          'btn-sm': true,\n          'btn-outline-primary': !favorited,\n          'btn-primary': favorited,\n        })}\n        disabled={submittingFavorite}\n        onClick={() => onFavorite(slug, favorited)}\n      >\n        <i className='ion-heart'></i>\n        &nbsp; {(favorited ? 'Unfavorite ' : 'Favorite ') + 'Article'}\n        <span className='counter'>({favoritesCount})</span>\n      </button>\n    </Fragment>\n  );\n}\n\nasync function onFollow(username: string, following: boolean) {\n  if (store.getState().app.user.isNone()) {\n    redirect('register');\n    return;\n  }\n\n  store.dispatch(startSubmittingFollow());\n\n  const author = await (following ? unfollowUser : followUser)(username);\n  store.dispatch(updateAuthor(author));\n}\n\nasync function onFavorite(slug: string, favorited: boolean) {\n  if (store.getState().app.user.isNone()) {\n    redirect('register');\n    return;\n  }\n\n  store.dispatch(startSubmittingFavorite());\n\n  const article = await (favorited ? unfavoriteArticle : favoriteArticle)(slug);\n  store.dispatch(loadArticle(article));\n}\n\nfunction OwnerArticleMetaActions({\n  article: { slug },\n  deletingArticle,\n}: {\n  article: Article;\n  deletingArticle: boolean;\n}) {\n  return (\n    <Fragment>\n      <button className='btn btn-outline-secondary btn-sm' onClick={() => redirect(`editor/${slug}`)}>\n        <i className='ion-plus-round'></i>\n        &nbsp; Edit Article\n      </button>\n      &nbsp;\n      <button\n        className='btn btn-outline-danger btn-sm'\n        disabled={deletingArticle}\n        onClick={() => onDeleteArticle(slug)}\n      >\n        <i className='ion-heart'></i>\n        &nbsp; Delete Article\n      </button>\n    </Fragment>\n  );\n}\n\nasync function onDeleteArticle(slug: string) {\n  store.dispatch(startDeletingArticle());\n  await deleteArticle(slug);\n  redirect('');\n}\n\nfunction CommentSection({\n  user,\n  article,\n  commentSection: { submittingComment, commentBody, comments },\n}: {\n  user: Option<User>;\n  article: Article;\n  commentSection: CommentSectionState;\n}) {\n  return (\n    <div className='row'>\n      <div className='col-xs-12 col-md-8 offset-md-2'>\n        {user.match({\n          none: () => (\n            <p style={{ display: 'inherit' }}>\n              <Link to='/login'>Sign in</Link> or <Link to='/register'>sign up</Link> to add comments on this article.\n            </p>\n          ),\n          some: (user) => (\n            <CommentForm\n              user={user}\n              slug={article.slug}\n              submittingComment={submittingComment}\n              commentBody={commentBody}\n            />\n          ),\n        })}\n\n        {comments.match({\n          none: () => <div>Loading comments...</div>,\n          some: (comments) => (\n            <Fragment>\n              {comments.map((comment, index) => (\n                <ArticleComment key={comment.id} comment={comment} slug={article.slug} user={user} index={index} />\n              ))}\n            </Fragment>\n          ),\n        })}\n      </div>\n    </div>\n  );\n}\n\nfunction CommentForm({\n  user: { image },\n  commentBody,\n  slug,\n  submittingComment,\n}: {\n  user: User;\n  commentBody: string;\n  slug: string;\n  submittingComment: boolean;\n}) {\n  return (\n    <form className='card comment-form' onSubmit={onPostComment(slug, commentBody)}>\n      <div className='card-block'>\n        <textarea\n          className='form-control'\n          placeholder='Write a comment...'\n          rows={3}\n          onChange={onCommentChange}\n          value={commentBody}\n        ></textarea>\n      </div>\n      <div className='card-footer'>\n        <img src={image || undefined} className='comment-author-img' />\n        <button className='btn btn-sm btn-primary' disabled={submittingComment}>\n          Post Comment\n        </button>\n      </div>\n    </form>\n  );\n}\n\nfunction onCommentChange(ev: React.ChangeEvent<HTMLTextAreaElement>) {\n  store.dispatch(updateCommentBody(ev.target.value));\n}\n\nfunction onPostComment(slug: string, body: string): (ev: React.FormEvent) => void {\n  return async (ev) => {\n    ev.preventDefault();\n\n    store.dispatch(startSubmittingComment());\n    await createComment(slug, body);\n\n    store.dispatch(loadComments(await getArticleComments(slug)));\n  };\n}\n\nfunction ArticleComment({\n  comment: {\n    id,\n    body,\n    createdAt,\n    author: { username, image },\n  },\n  slug,\n  index,\n  user,\n}: {\n  comment: Comment;\n  slug: string;\n  index: number;\n  user: Option<User>;\n}) {\n  return (\n    <div className='card'>\n      <div className='card-block'>\n        <p className='card-text'>{body}</p>\n      </div>\n      <div className='card-footer'>\n        <Link className='comment-author' to={`/profile/${username}`}>\n          <img src={image || undefined} className='comment-author-img' />\n        </Link>\n        &nbsp;\n        <Link className='comment-author' to={`/profile/${username}`}>\n          {username}\n        </Link>\n        <span className='date-posted'>{format(createdAt, 'PP')}</span>\n        {user.isSome() && user.unwrap().username === username && (\n          <span className='mod-options'>\n            <i\n              className='ion-trash-a'\n              aria-label={`Delete comment ${index + 1}`}\n              onClick={() => onDeleteComment(slug, id)}\n            ></i>\n          </span>\n        )}\n      </div>\n    </div>\n  );\n}\n\nasync function onDeleteComment(slug: string, id: number) {\n  await deleteComment(slug, id);\n  store.dispatch(loadComments(await getArticleComments(slug)));\n}\n","import axios from 'axios';\nimport { Fragment } from 'react';\nimport { HashRouter, Redirect, Route, RouteProps, Switch } from 'react-router-dom';\nimport { getUser } from '../../services/conduit';\nimport { store } from '../../state/store';\nimport { useStoreWithInitializer } from '../../state/storeHooks';\nimport { EditArticle } from '../Pages/EditArticle/EditArticle';\nimport { Footer } from '../Footer/Footer';\nimport { Header } from '../Header/Header';\nimport { Home } from '../Pages/Home/Home';\nimport { Login } from '../Pages/Login/Login';\nimport { NewArticle } from '../Pages/NewArticle/NewArticle';\nimport { Register } from '../Pages/Register/Register';\nimport { Settings } from '../Pages/Settings/Settings';\nimport { endLoad, loadUser } from './App.slice';\nimport { ProfilePage } from '../Pages/ProfilePage/ProfilePage';\nimport { ArticlePage } from '../Pages/ArticlePage/ArticlePage';\n\nexport function App() {\n  const { loading, user } = useStoreWithInitializer(({ app }) => app, load);\n\n  const userIsLogged = user.isSome();\n\n  return (\n    <HashRouter>\n      {!loading && (\n        <Fragment>\n          <Header />\n          <Switch>\n            <GuestOnlyRoute exact path='/login' userIsLogged={userIsLogged}>\n              <Login />\n            </GuestOnlyRoute>\n            <GuestOnlyRoute exact path='/register' userIsLogged={userIsLogged}>\n              <Register />\n            </GuestOnlyRoute>\n            <UserOnlyRoute exact path='/settings' userIsLogged={userIsLogged}>\n              <Settings />\n            </UserOnlyRoute>\n            <UserOnlyRoute exact path='/editor' userIsLogged={userIsLogged}>\n              <NewArticle />\n            </UserOnlyRoute>\n            <UserOnlyRoute exact path='/editor/:slug' userIsLogged={userIsLogged}>\n              <EditArticle />\n            </UserOnlyRoute>\n            <Route path='/profile/:username'>\n              <ProfilePage />\n            </Route>\n            <Route path='/article/:slug'>\n              <ArticlePage />\n            </Route>\n            <Route exact path='/'>\n              <Home />\n            </Route>\n            <Route path='*'>\n              <Redirect to='/' />\n            </Route>\n          </Switch>\n          <Footer />\n        </Fragment>\n      )}\n    </HashRouter>\n  );\n}\n\nasync function load() {\n  const token = localStorage.getItem('token');\n  if (!store.getState().app.loading || !token) {\n    store.dispatch(endLoad());\n    return;\n  }\n  axios.defaults.headers.Authorization = `Token ${token}`;\n\n  try {\n    store.dispatch(loadUser(await getUser()));\n  } catch {\n    store.dispatch(endLoad());\n  }\n}\n\n/* istanbul ignore next */\nfunction GuestOnlyRoute({\n  children,\n  userIsLogged,\n  ...rest\n}: { children: JSX.Element | JSX.Element[]; userIsLogged: boolean } & RouteProps) {\n  return (\n    <Route {...rest}>\n      {children}\n      {userIsLogged && <Redirect to='/' />}\n    </Route>\n  );\n}\n\n/* istanbul ignore next */\nfunction UserOnlyRoute({\n  children,\n  userIsLogged,\n  ...rest\n}: { children: JSX.Element | JSX.Element[]; userIsLogged: boolean } & RouteProps) {\n  return (\n    <Route {...rest}>\n      {children}\n      {!userIsLogged && <Redirect to='/' />}\n    </Route>\n  );\n}\n","import ReactDOM from 'react-dom';\nimport './index.css';\nimport { App } from './components/App/App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}